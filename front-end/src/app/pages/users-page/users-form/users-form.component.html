<app-dialog-layout>
  <h3 header-label>{{ id ? "Edit" : "Add" }} User</h3>

  <button header-action mat-icon-button (click)="dialogRef.close()">
    <mat-icon> close</mat-icon>
  </button>

  <form content [formGroup]="form">
    <app-input>
      <mat-label>Email <span class="star">*</span></mat-label>
      <mat-form-field appearance="outline">
        <input matInput formControlName="email"/>
        <mat-error class="error" *ngIf="form.controls?.['email']?.errors?.['required']">
          This field is mandatory
        </mat-error>
        <mat-error class="error" *ngIf="form.controls?.['email']?.errors?.['email']">
          Invalid Email
        </mat-error>
      </mat-form-field>
    </app-input>

    <app-input>
      <mat-label>First name <span class="star">*</span></mat-label>
      <mat-form-field appearance="outline">
        <input matInput formControlName="first_name"/>
        <mat-error class="error" *ngIf="form.controls?.['first_name']?.errors?.['required']">
          This field is mandatory
        </mat-error>
      </mat-form-field>
    </app-input>

    <app-input>
      <mat-label>Last name <span class="star">*</span></mat-label>
      <mat-form-field appearance="outline">
        <input matInput formControlName="last_name"/>
        <mat-error class="error" *ngIf="form.controls?.['last_name']?.errors?.['required']">
          This field is mandatory
        </mat-error>
      </mat-form-field>
    </app-input>

    <app-input>
      <mat-label>Role <span class="star">*</span></mat-label>
      <ng-select formControlName="role" [items]="userRoles" bindLabel="id" bindValue="id"></ng-select>
      <div class="mat-mdc-form-field-subscript-wrapper mat-mdc-form-field-bottom-align">
        <div class="mat-mdc-form-field-error-wrapper">
          <mat-error class="error" *ngIf="form.controls?.['role']?.errors?.['required']">
            This field is mandatory
          </mat-error>
        </div>
      </div>
    </app-input>

  </form>

  <button
    action
    type="submit"
    mat-raised-button
    color="primary"
    (click)="submit()"
  >
    {{ id ? "Edit" : "Add" }}
  </button>
</app-dialog-layout>
